{% extends 'base.html' %}

{% block content %}

<div class="container" ng-controller="homeCtrl">
    <div class="btn-group" role="group" aria-label="Basic example" style="margin-top: 20px">
        <button type="button" class="btn-hover color-9" data-toggle="modal" data-target="#editProfileModal">
            Edit Profile
        </button>
        <button type="button" class="btn-hover color-9" data-toggle="modal" data-target="#changePasswordModal">
            Change Password
        </button>
    </div>
    <div class="main-body">
        <!-- /Breadcrumb -->
        <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center">
                            <img src="media/avatar2.jpg" alt="Admin" class="rounded-circle" width="220">
                            <div class="mt-3">
                                <h4>{{ user.username }}</h4>
                                <p class="text-secondary mb-1">Welcome to your Profile</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">First name:</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user.first_name }}
                            </div>
                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Last name:</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user.last_name }}
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Email:</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user.email }}
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Phone:</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user.profile.phone_number }}
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Last Login:</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                {{ user.last_login }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="title">First Name</label>
                            <input class="form-control" id="first_name" ng-model="profileToEdit.first_name"/>
                        </div>
                        <div class="form-group">
                            <label for="title">Last Name</label>
                            <input class="form-control" id="last_name" ng-model="profileToEdit.last_name"/>
                        </div>
                        <div class="form-group">
                            <label for="title">Phone number</label>
                            <input class="form-control" id="phone_number" ng-model="profileToEdit.phone_number"/>
                        </div>
                        <div class="form-group">
                            <label for="title">Email</label>
                            <input class="form-control" id="email" ng-model="profileToEdit.email"/>
                        </div>
                    </form>
                </div>
                <div ng-if="error">{[{error}]}</div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" ng-click="editProfile()">Edit</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="title">Enter new password</label>
                            <input type="password" class="form-control" id="password"
                                   ng-model="passwordToEdit.password"/>
                        </div>
                        <div class="form-group">
                            <label for="title"> Confirm Password</label>
                            <input type="password" class="form-control" id="password2"
                                   ng-model="passwordToEdit.password2"/>
                        </div>
                    </form>
                </div>
                <div ng-if="error" class="alert alert-danger" role="alert">{[{error}]}</div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" ng-click="changePassword()">Change</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
